<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PDF to Images (PNG) – ConvertMitra</title>
  <meta name="description" content="Convert PDF pages to PNG images in your browser." />
  <link rel="stylesheet" href="../css/style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.min.js" crossorigin="anonymous"></script>
</head>
<body>
<header><nav><a href="../index.html">Home</a></nav></header>
<main>
  <h1>PDF to Images</h1>
  <input type="file" id="pdf" accept="application/pdf">
  <button id="go">Convert</button>
  <div id="out" class="output"></div>
</main>
<footer><p>© 2025 ConvertMitra</p></footer>
<script>
  const $ = (s)=>document.querySelector(s);
  $('#go').addEventListener('click', async ()=>{
    const f = $('#pdf').files[0]; if(!f) return alert('Choose a PDF');
    $('#out').textContent = 'Rendering…';
    const data = await f.arrayBuffer();
    const pdf = await pdfjsLib.getDocument({data}).promise;
    const out = $('#out'); out.innerHTML = '';
    for (let p=1; p<=pdf.numPages; p++){
      const page = await pdf.getPage(p);
      const viewport = page.getViewport({ scale: 2 });
      const canvas = document.createElement('canvas');
      canvas.width = viewport.width; canvas.height = viewport.height;
      await page.render({ canvasContext: canvas.getContext('2d'), viewport }).promise;
      const url = canvas.toDataURL('image/png');
      const a = document.createElement('a'); a.href=url; a.download=`page-${p}.png`; a.textContent=`Download page ${p}`;
      const wrap = document.createElement('div'); wrap.style.margin='10px 0'; wrap.appendChild(a); wrap.appendChild(canvas);
      out.appendChild(wrap);
    }
  });
</script>
</body>
</html>
